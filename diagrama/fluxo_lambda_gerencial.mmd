flowchart LR
    %% Camada do UsuÃ¡rio
    User["ğŸ‘¤ UsuÃ¡rio<br/>Docente/Aluno"]
    Form["ğŸ“ Google Forms<br/>FormulÃ¡rio Web"]
    
    %% Camada de Entrada de Dados
    FormData[("ğŸ“‹ Dados Submetidos<br/>â€¢ InformaÃ§Ãµes<br/>â€¢ Anexos")]
    
    %% Camada AWS
    API["ğŸŒ AWS API Gateway<br/>Recebe requisiÃ§Ã£o POST"]
    Lambda["âš¡ AWS Lambda<br/>Processa formulÃ¡rio"]
    
    %% Camada de Processamento
    Router{"ğŸ”€ Identificar<br/>Tipo de FormulÃ¡rio"}
    
    %% Tipos de FormulÃ¡rio
    FormACC["ğŸ“‹ ACC<br/>Atividades Complementares"]
    FormPROJ["ğŸ”¬ Projetos<br/>Pesquisa/ExtensÃ£o"]
    FormTCC["ğŸ“ TCC<br/>Trabalho de ConclusÃ£o"]
    FormESTAGIO["ğŸ’¼ EstÃ¡gio<br/>ObrigatÃ³rio/NÃ£o-ObrigatÃ³rio"]
    FormPLANO["ğŸ“š Plano de Ensino<br/>Disciplinas"]
    
    %% DestinatÃ¡rios
    subgraph Recipients ["ğŸ“¬ DestinatÃ¡rios"]
        direction TB
        Coord["ğŸ‘” Gestores FASI"]
        Parecer["ğŸ‘¨â€ğŸ« Pareceristas<br/>Docentes avaliadores"]
        Student["ğŸ“ Alunos<br/>CÃ³pia de confirmaÃ§Ã£o"]
    end
    
    %% Armazenamento
    subgraph Storage ["ğŸ’¾ Armazenamento Organizado"]
        direction TB
        DriveACC["ğŸ“ ACC/<br/>Turma/MatrÃ­cula"]
        DrivePROJ["ğŸ“ Projetos/<br/>Edital/Ano/Docente/Tipo"]
        DriveTCC["ğŸ“ TCC/<br/>Tipo/Turma/Aluno"]
        DriveEST["ğŸ“ EstÃ¡gio/<br/>Tipo/Turma/Aluno"]
        DrivePLANO["ğŸ“ Plano de Ensino/<br/>Semestre"]
    end
    
    %% Fluxo de Dados Principal
    User -->|"Preenche"| Form
    Form -->|"Submete dados"| FormData
    FormData -->|"Envia via POST"| API
    API -->|"Aciona"| Lambda
    Lambda -->|"Analisa"| Router
    
    %% Roteamento por tipo
    Router -->|"ACC"| FormACC
    Router -->|"Projetos"| FormPROJ
    Router -->|"TCC"| FormTCC
    Router -->|"EstÃ¡gio"| FormESTAGIO
    Router -->|"Plano de Ensino"| FormPLANO
    
    %% Processamento Paralelo
    subgraph Processing ["âš™ï¸ Processamento Paralelo"]
        direction TB
        Email["ğŸ“§ Envio de Email<br/>â€¢ NotificaÃ§Ã£o aos responsÃ¡veis<br/>â€¢ Anexa documentos gerados"]
        
        subgraph DocGen ["ğŸ“ GeraÃ§Ã£o de Documentos"]
            direction TB
            PDF["ğŸ“„ GeraÃ§Ã£o de PDFs<br/>â€¢ Parecer tÃ©cnico<br/>â€¢ DeclaraÃ§Ã£o (se ExtensÃ£o)"]
            IA["ğŸ§  LLM<br/>â€¢ ExtraÃ§Ã£o de dados<br/>â€¢ Analisa as InformaÃ§Ãµes"]
        end
        
        Drive["â˜ï¸ Google Drive<br/>â€¢ Organiza anexos<br/>â€¢ Cria estrutura de pastas"]
    end
    %% Processamento de cada tipo
    FormACC --> Processing
    FormPROJ --> Processing
    FormTCC --> Processing
    FormESTAGIO --> Processing
    FormPLANO --> Processing
    
    %% AÃ§Ãµes paralelas
    Email -.->|"7a. Notifica"| Recipients
    Drive -.->|"7b. Salva"| Storage
    
    %% DistribuiÃ§Ã£o de emails
   
    
    %% Armazenamento por tipo
    
    
    %% Resposta ao usuÃ¡rio
    
    %% Estilos
    classDef userLayer fill:#E1F5FE,stroke:#01579B,stroke-width:3px,color:#000
    classDef dataLayer fill:#F3E5F5,stroke:#4A148C,stroke-width:2px,color:#000
    classDef awsLayer fill:#FFF3E0,stroke:#E65100,stroke-width:3px,color:#000
    classDef formType fill:#E8F5E9,stroke:#1B5E20,stroke-width:2px,color:#000
    classDef processing fill:#E0F2F1,stroke:#004D40,stroke-width:2px,color:#000
    classDef recipients fill:#FCE4EC,stroke:#880E4F,stroke-width:2px,color:#000
    classDef storage fill:#FFF9C4,stroke:#F57F17,stroke-width:2px,color:#000
    classDef success fill:#C8E6C9,stroke:#2E7D32,stroke-width:2px,color:#000
    
    class User,Form userLayer
    class FormData dataLayer
    class API,Lambda awsLayer
    class Router awsLayer
    class FormACC,FormPROJ,FormTCC,FormESTAGIO,FormPLANO formType
    class Email,IA,PDF,Drive processing
    class Coord,Parecer,Student recipients
    class DriveACC,DrivePROJ,DriveTCC,DriveEST,DrivePLANO storage
    class Response success